<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link rel="stylesheet" href="src/carrinho.css">
  <link rel="stylesheet" href="src/produtos.css">
  <title>Produtos</title>
  <style>
    /* Estilos para o carrossel */
    .carrossel-container {
      position: relative;
      max-width: 1200px;
      margin: 20px auto;
      overflow: hidden;
    }
    
    .carrossel {
      display: flex;
      transition: transform 0.5s ease;
      padding: 10px 0;
    }
    
    .produto {
      min-width: 220px;
      margin: 0 15px;
      padding: 15px;
      border: 1px solid #ddd;
      border-radius: 8px;
      text-align: center;
      background: white;
      box-shadow: 0 2px 5px rgba(0,0,0,0.1);
    }
    
    .produto img {
      max-width: 100%;
      height: 150px;
      object-fit: contain;
      margin-bottom: 10px;
    }
    
    .btn-prev, .btn-next {
      position: absolute;
      top: 50%;
      transform: translateY(-50%);
      background: rgba(0,0,0,0.5);
      color: white;
      border: none;
      padding: 10px 15px;
      cursor: pointer;
      border-radius: 50%;
      z-index: 10;
    }
    
    .btn-prev {
      left: 10px;
    }
    
    .btn-next {
      right: 10px;
    }
    
    .admin-link {
      display: block;
      text-align: center;
      margin: 20px auto;
      padding: 10px 20px;
      background: #2c3e50;
      color: white;
      text-decoration: none;
      border-radius: 4px;
      max-width: 200px;
    }
  </style>
</head>
<body>

  <!-- MENU -->
  <div class="menu">
    <ul class="nav">
      <li class="lista_menu"><a href="pagina_inicial.html" class="itens_menu">Página Inicial</a></li>
      <li class="lista_menu"><a href="produtos.html" class="itens_menu">Produtos</a></li>
      <li class="lista_menu"><a href="carrinho.html" class="itens_menu">Carrinho</a></li>
      <li class="lista_menu"><a href="contato.html" class="itens_menu">Contato</a></li>
    </ul>
  </div>

  <!-- CARROSSEL DE PRODUTOS -->
  <div class="carrossel-container">
    <button class="btn-prev" onclick="moverCarrossel(-1)">&#10094;</button>
    
    <div class="carrossel" id="carrossel">
      <!-- As imagens do carrossel serão carregadas aqui via JavaScript -->
    </div>
    
    <button class="btn-next" onclick="moverCarrossel(1)">&#10095;</button>
  </div>

  <script>
    // Carregar imagens do carrossel do localStorage
    document.addEventListener('DOMContentLoaded', function() {
      const carouselItems = JSON.parse(localStorage.getItem('carouselItems')) || [];
      const carouselElement = document.getElementById('carrossel');
      
      // Limpar carrossel existente
      carouselElement.innerHTML = '';
      
      if (carouselItems.length > 0) {
        // Adicionar apenas itens ativos
        const activeItems = carouselItems.filter(item => item.status === 'active');
        
        if (activeItems.length > 0) {
          activeItems.forEach(item => {
            const productDiv = document.createElement('div');
            productDiv.className = 'produto';
            
            productDiv.innerHTML = `
              <img src="${item.image}" alt="${item.title || 'Produto'}">
              ${item.title ? `<h4>${item.title}</h4>` : ''}
              ${item.description ? `<p>${item.description}</p>` : ''}
            `;
            
            // Se tiver link, tornar clicável
            if (item.link) {
              productDiv.addEventListener('click', function() {
                window.location.href = item.link;
              });
              productDiv.style.cursor = 'pointer';
            }
            
            carouselElement.appendChild(productDiv);
          });
        } else {
          // Mensagem se não houver itens ativos
          carouselElement.innerHTML = '<p>Nenhum produto disponível no carrossel.</p>';
        }
      } else {
        // Se não houver itens no localStorage, usar os produtos padrão
        const defaultProducts = [
          {
            image: '/img/707589---fralda-pampers-confort-sec--tamanho-xxg-60-unidades_0006_7500435153386_1.png',
            title: 'Fralda Pampers Confort Sec XXG 60 Unidades',
            description: 'R$ 25,00'
          },
          {
            image: '/img/738913---Fralda-Descartavel-Turma-da-Monica-Baby-XXG-36-Unidades_0006_0.png.png',
            title: 'Fralda Turma da Mônica Baby XXG 36 Unidades',
            description: 'R$ 8,00'
          },
          {
            image: '/img/Alcatra.jpg',
            title: 'Alcatra Bovina 500g',
            description: 'R$ 5,50'
          },
          {
            image: '/img/Amaciante-Concentrado-Original-Comfort-500-Ml.webp',
            title: 'Amaciante Comfort Concentrado Original 500ml',
            description: 'R$ 7,00'
          },
          {
            image: '/img/amaciante-tradicional-comfort-explosão-azul.jpg',
            title: 'Amaciante Comfort Explosão Azul Tradicional',
            description: 'R$ 22,00'
          }
        ];
        
        defaultProducts.forEach(product => {
          const productDiv = document.createElement('div');
          productDiv.className = 'produto';
          
          productDiv.innerHTML = `
            <img src="${product.image}" alt="${product.title}">
            <h4>${product.title}</h4>
            <p>${product.description}</p>
          `;
          
          carouselElement.appendChild(productDiv);
        });
      }
      
      // Inicializar a posição do carrossel
      currentScrollPosition = 0;
    });

    // Variável para controlar a posição do carrossel
    let currentScrollPosition = 0;

    // Função para mover o carrossel
    function moverCarrossel(direction) {
      const carousel = document.getElementById('carrossel');
      const productWidth = document.querySelector('.produto').offsetWidth + 30; // 30px de margem
      const visibleProducts = Math.floor(carousel.offsetWidth / productWidth);
      const totalProducts = document.querySelectorAll('.produto').length;
      
      // Calcular a nova posição
      currentScrollPosition += direction * visibleProducts * productWidth;
      
      // Limitar a posição para não ultrapassar os limites
      const maxScroll = (totalProducts - visibleProducts) * productWidth;
      currentScrollPosition = Math.max(0, Math.min(currentScrollPosition, maxScroll));
      
      // Aplicar a transformação
      carousel.style.transform = `translateX(-${currentScrollPosition}px)`;
    }
  </script>
</body>
</html>